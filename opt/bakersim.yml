---
# file: bakersim.yml
#
# author: Philip Lombardi (plombardi@datawire.io)

kubernetes:
  config_path: /home/plombardi/.kube/config

  master_instance_type: m4.large
  node_instance_type: m4.large
  node_count: 5
  cluster_zone: us-east-1c

docker:
  file: docker/bakerscale-dev.dockerfile
  packagecloud_repository: datawire/dev
  packages:
    - data

packagecloud_repository: datawire/development
packages:
  - datawire-common
  - datawire-directory
  - datawire-sherlock
  - datawire-watson

logging:
  level: DEBUG
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

bakerscale:
  stats_server: 52.91.198.221
  image: plombardi89/bs4:v5
  profiles:
    small:
      description: small deployment
      initial_services: 1
      initial_clients: 1
      cycles: -1
      cycle_quantum: 60
      target_limits:
        servers: 5
        clients: 5
      tasks:
        - type: spawn.servers
          count: 4
        - type: spawn.clients
          count: 4
        - type: churn.servers
          percent: 1
          when_running: 5
    max_load:
      description: increase clients until failure
      initial_services: 1
      initial_clients: 1
      cycles: -1
      cycle_quantum: 60
      tasks:
        - type: spawn.servers
          count: 10
        - type: spawn.clients
          count: 10
        - type: churn.servers
          percent: 10
          when_running: 100